function Gluipertje(t,e){let a=`${t}:${e}/api`;async function n(t){let e=await fetch(t);return await e.json()}async function r(t,e){let a=await fetch(t,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})});return await a.json()}async function s(t){if(t.constructor===Array&&t.length>0){let e=t,a=[];for(let t of e)a.push(await s(t));return a}if(t.constructor===String&&t.length>0)try{return await s(JSON.parse(t))}catch(e){return console.log(e),t}else{if(t.constructor!==Object)return t;try{let e=t;return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_at=new Date(e.deleted_at),"Invalid Date"==e.deleted_at&&delete e.deleted_at,e}catch(e){return console.log(e),t}}}async function i(t){if(t.constructor===Array&&t.length>0){let e=t,a=[];for(let t of e)a.push(await i(t));return a}if(t.constructor===String&&t.length>0)try{return await i(JSON.parse(t))}catch(e){return console.log(e),t}else{if(t.constructor!==Object)return t;try{let e=t;return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_at=new Date(e.deleted_at),"Invalid Date"==e.deleted_at&&delete e.deleted_at,delete e.from_id,e}catch(e){return console.log(e),t}}}async function c(t){return await s(await n(`${a}/user/${t}`))}async function o(t){return await i(await n(`${a}/messages/${t}`))}return this.message={},this.message.all=async function(){return await i(await n(`${a}/messages`))},this.message.byLimit=o,this.message.byId=async function(t){return await i(await n(`${a}/message/${t}`))},this.message.last=async function(){return(await o(1))[0]},this.message.send=async function(t,e){return await i(await r(`${a}/messages`,{token:t,body:e}))},this.user={},this.user.all=async function(){return await s(await n(`${a}/users`))},this.user.byId=c,this.user.byToken=async function(t){return await s(await n(`${a}/${t}/me`))},this.user.revokeToken=async function(t,e){return await r(`${a}/token`,{username:t,password:e})},this.user.create=async function(t,e,n){return await s(await r(`${a}/users`,{nickname:t,username:e,password:n}))},this}try{module.exports=Gluipertje}catch(t){console.log("You failed")}