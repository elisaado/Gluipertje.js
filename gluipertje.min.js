'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function f(g,h){try{var j=b[g](h),k=j.value}catch(l){return void d(l)}return j.done?void c(k):Promise.resolve(k).then(function(l){f('next',l)},function(l){f('throw',l)})}return f('next')})}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Gluipertje=function(){function a(_ref){var b=_ref.host,c=_ref.port;_classCallCheck(this,a),this.this.baseurl=b+':'+c+'/api'}return _createClass(a,[{key:'getAllUsers',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=parseUser,g.next=3,fetchJSON({url:this.baseurl+'/users'});case 3:return g.t1=g.sent,g.next=6,(0,g.t0)(g.t1);case 6:return g.abrupt('return',g.sent);case 7:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getUserById',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=parseUser,h.next=3,fetchJSON({url:this.baseurl+'/user/'+f});case 3:return h.t1=h.sent,h.next=6,(0,h.t0)(h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getUserByToken',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=parseUser,h.next=3,fetchJSON({url:this.baseurl+'/'+f+'/me'});case 3:return h.t1=h.sent,h.next=6,(0,h.t0)(h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'revokeToken',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.username,h=f.password;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,postJSON({url:this.baseurl+'/token',data:{username:g,password:h}});case 2:return k.abrupt('return',k.sent);case 3:case'end':return k.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'createUser',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.nickname,h=f.username,j=f.password;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=parseUser,l.next=3,postJSON({url:this.baseurl+'/users',data:{nickname:g,username:h,password:j}});case 3:return l.t1=l.sent,l.next=6,(0,l.t0)(l.t1);case 6:return l.abrupt('return',l.sent);case 7:case'end':return l.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getAllMessages',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=parseMessage,g.next=3,fetchJSON({url:this.baseurl+'/messages'});case 3:return g.t1=g.sent,g.next=6,(0,g.t0)(g.t1);case 6:return g.abrupt('return',g.sent);case 7:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getMessageById',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=parseMessage,h.next=3,fetchJSON({url:this.baseurl+'/message/'+f});case 3:return h.t1=h.sent,h.next=6,(0,h.t0)(h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getMessagesByLimit',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=parseMessage,h.next=3,fetchJSON({url:this.baseurl+'/messages/'+f});case 3:return h.t1=h.sent,h.next=6,(0,h.t0)(h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'getLastMessage',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,getMessagesByLimit(1);case 2:return g.abrupt('return',g.sent[0]);case 3:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'sendMessage',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.token,h=f.body;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=parseMessage,k.next=3,postJSON({url:this.baseurl+'/messages',data:{token:g,body:h}});case 3:return k.t1=k.sent,k.next=6,(0,k.t0)(k.t1);case 6:return k.abrupt('return',k.sent);case 7:case'end':return k.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()}],[{key:'fetchJSON',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var h,j,g=f.url;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(g);case 2:return h=l.sent,l.next=5,h.json();case 5:return j=l.sent,l.abrupt('return',j);case 7:case'end':return l.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'postJSON',value:function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var j,g=f.url,h=f.data;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(g,{method:'POST',body:JSON.stringify(h),headers:new Headers({'Content-Type':'application/json'})});case 2:return j=l.sent,l.next=5,j.json();case 5:return l.abrupt('return',l.sent);case 6:case'end':return l.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}()},{key:'parseUser',value:function(b){function c(){return b.apply(this,arguments)}return c.toString=function(){return b.toString()},c}(function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function c(d){var f,g,h,j,k,l,m,o,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(d.constructor===Array&&0<d.length)){r.next=35;break}f=d,g=[],h=!0,j=!1,k=void 0,r.prev=6,l=f[Symbol.iterator]();case 8:if(h=(m=l.next()).done){r.next=18;break}return o=m.value,r.t0=g,r.next=13,parseUser(o);case 13:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 15:h=!0,r.next=8;break;case 18:r.next=24;break;case 20:r.prev=20,r.t2=r['catch'](6),j=!0,k=r.t2;case 24:r.prev=24,r.prev=25,!h&&l.return&&l.return();case 27:if(r.prev=27,!j){r.next=30;break}throw k;case 30:return r.finish(27);case 31:return r.finish(24);case 32:return r.abrupt('return',g);case 35:if(!(d.constructor===String&&0<d.length)){r.next=48;break}return r.prev=36,r.next=39,parseUser(JSON.parse(d));case 39:return r.abrupt('return',r.sent);case 42:return r.prev=42,r.t3=r['catch'](36),console.log(r.t3),r.abrupt('return',d);case 46:r.next=65;break;case 48:if(d.constructor!==Object){r.next=64;break}return r.prev=49,p=d,p.created_at=new Date(p.created_at),p.updated_at=new Date(p.updated_at),p.deleted_at=new Date(p.deleted_at),'Invalid Date'==p.deleted_at&&delete p.deleted_at,r.abrupt('return',p);case 58:return r.prev=58,r.t4=r['catch'](49),console.log(r.t4),r.abrupt('return',d);case 62:r.next=65;break;case 64:return r.abrupt('return',d);case 65:case'end':return r.stop();}},c,this,[[6,20,24,32],[25,,27,31],[36,42],[49,58]])}));return function(){return b.apply(this,arguments)}}())},{key:'parseMessage',value:function(b){function c(){return b.apply(this,arguments)}return c.toString=function(){return b.toString()},c}(function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function c(d){var f,g,h,j,k,l,m,o,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(d.constructor===Array&&0<d.length)){r.next=35;break}f=d,g=[],h=!0,j=!1,k=void 0,r.prev=6,l=f[Symbol.iterator]();case 8:if(h=(m=l.next()).done){r.next=18;break}return o=m.value,r.t0=g,r.next=13,parseMessage(o);case 13:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 15:h=!0,r.next=8;break;case 18:r.next=24;break;case 20:r.prev=20,r.t2=r['catch'](6),j=!0,k=r.t2;case 24:r.prev=24,r.prev=25,!h&&l.return&&l.return();case 27:if(r.prev=27,!j){r.next=30;break}throw k;case 30:return r.finish(27);case 31:return r.finish(24);case 32:return r.abrupt('return',g);case 35:if(!(d.constructor===String&&0<d.length)){r.next=48;break}return r.prev=36,r.next=39,parseMessage(JSON.parse(d));case 39:return r.abrupt('return',r.sent);case 42:return r.prev=42,r.t3=r['catch'](36),console.log(r.t3),r.abrupt('return',d);case 46:r.next=66;break;case 48:if(d.constructor!==Object){r.next=65;break}return r.prev=49,p=d,p.created_at=new Date(p.created_at),p.updated_at=new Date(p.updated_at),p.deleted_at=new Date(p.deleted_at),'Invalid Date'==p.deleted_at&&delete p.deleted_at,delete p.from_id,r.abrupt('return',p);case 59:return r.prev=59,r.t4=r['catch'](49),console.log(r.t4),r.abrupt('return',d);case 63:r.next=66;break;case 65:return r.abrupt('return',d);case 66:case'end':return r.stop();}},c,this,[[6,20,24,32],[25,,27,31],[36,42],[49,59]])}));return function(){return b.apply(this,arguments)}}())}]),a}();try{module.exports=Gluipertje}catch(e){console.log(e)};