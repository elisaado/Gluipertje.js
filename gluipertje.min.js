'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function f(g,h){try{var i=b[g](h),j=i.value}catch(k){return void d(k)}return i.done?void c(j):Promise.resolve(j).then(function(k){f('next',k)},function(k){f('throw',k)})}return f('next')})}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Gluipertje=function(){function a(_ref){var b=_ref.host,c=_ref.port;_classCallCheck(this,a),this.baseurl=b+':'+c+'/api'}return a.fetchJSON=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var h,i,g=f.url;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,fetch(g);case 2:return h=k.sent,k.next=5,h.json();case 5:return i=k.sent,k.abrupt('return',i);case 7:case'end':return k.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.postJSON=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var i,g=f.url,h=f.data;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,fetch(g,{method:'POST',body:JSON.stringify(h),headers:new Headers({'Content-Type':'application/json'})});case 2:return i=k.sent,k.next=5,i.json();case 5:return k.abrupt('return',k.sent);case 6:case'end':return k.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.parseUser=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g,h,i,j,k,l,m,o;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(f.constructor===Array&&0<f.length)){q.next=25;break}g=f,h=[],i=g,j=Array.isArray(i),k=0,i=j?i:i[Symbol.iterator]();case 4:if(!j){q.next=10;break}if(!(k>=i.length)){q.next=7;break}return q.abrupt('break',22);case 7:l=i[k++],q.next=14;break;case 10:if(k=i.next(),!k.done){q.next=13;break}return q.abrupt('break',22);case 13:l=k.value;case 14:return m=l,q.t0=h,q.next=18,this.constructor.parseUser(m);case 18:q.t1=q.sent,q.t0.push.call(q.t0,q.t1);case 20:q.next=4;break;case 22:return q.abrupt('return',h);case 25:if(!(f.constructor===String&&0<f.length)){q.next=38;break}return q.prev=26,q.next=29,this.constructor.parseUser(JSON.parse(f));case 29:return q.abrupt('return',q.sent);case 32:return q.prev=32,q.t2=q['catch'](26),console.log(q.t2),q.abrupt('return',f);case 36:q.next=55;break;case 38:if(f.constructor!==Object){q.next=54;break}return q.prev=39,o=f,o.created_at=new Date(o.created_at),o.updated_at=new Date(o.updated_at),o.deleted_at=new Date(o.deleted_at),'Invalid Date'==o.deleted_at&&delete o.deleted_at,q.abrupt('return',o);case 48:return q.prev=48,q.t3=q['catch'](39),console.log(q.t3),q.abrupt('return',f);case 52:q.next=55;break;case 54:return q.abrupt('return',f);case 55:case'end':return q.stop();}},d,this,[[26,32],[39,48]])}));return function b(){return c.apply(this,arguments)}}(),a.parseMessage=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g,h,i,j,k,l,m,o;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(f.constructor===Array&&0<f.length)){q.next=25;break}g=f,h=[],i=g,j=Array.isArray(i),k=0,i=j?i:i[Symbol.iterator]();case 4:if(!j){q.next=10;break}if(!(k>=i.length)){q.next=7;break}return q.abrupt('break',22);case 7:l=i[k++],q.next=14;break;case 10:if(k=i.next(),!k.done){q.next=13;break}return q.abrupt('break',22);case 13:l=k.value;case 14:return m=l,q.t0=h,q.next=18,this.parseMessage(m);case 18:q.t1=q.sent,q.t0.push.call(q.t0,q.t1);case 20:q.next=4;break;case 22:return q.abrupt('return',h);case 25:if(!(f.constructor===String&&0<f.length)){q.next=38;break}return q.prev=26,q.next=29,this.parseMessage(JSON.parse(f));case 29:return q.abrupt('return',q.sent);case 32:return q.prev=32,q.t2=q['catch'](26),console.log(q.t2),q.abrupt('return',f);case 36:q.next=56;break;case 38:if(f.constructor!==Object){q.next=55;break}return q.prev=39,o=f,o.created_at=new Date(o.created_at),o.updated_at=new Date(o.updated_at),o.deleted_at=new Date(o.deleted_at),'Invalid Date'==o.deleted_at&&delete o.deleted_at,delete o.from_id,q.abrupt('return',o);case 49:return q.prev=49,q.t3=q['catch'](39),console.log(q.t3),q.abrupt('return',f);case 53:q.next=56;break;case 55:return q.abrupt('return',f);case 56:case'end':return q.stop();}},d,this,[[26,32],[39,49]])}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getAllUsers=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=this.constructor,g.next=3,this.constructor.fetchJSON({url:this.baseurl+'/users'});case 3:return g.t1=g.sent,g.next=6,g.t0.parseUser.call(g.t0,g.t1);case 6:return g.abrupt('return',g.sent);case 7:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getUserById=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=this.constructor,h.next=3,this.constructor.fetchJSON({url:this.baseurl+'/user/'+f});case 3:return h.t1=h.sent,h.next=6,h.t0.parseUser.call(h.t0,h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getUserByUsername=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=this.constructor,h.next=3,this.constructor.fetchJSON({url:this.baseurl+'/user/'+f});case 3:return h.t1=h.sent,h.next=6,h.t0.parseUser.call(h.t0,h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getUserByToken=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=this.constructor,h.next=3,this.constructor.fetchJSON({url:this.baseurl+'/'+f+'/me'});case 3:return h.t1=h.sent,h.next=6,h.t0.parseUser.call(h.t0,h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.revokeToken=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.username,h=f.password;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.constructor.postJSON({url:this.baseurl+'/token',data:{username:g,password:h}});case 2:return j.abrupt('return',j.sent);case 3:case'end':return j.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.createUser=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.nickname,h=f.username,i=f.password;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=this.constructor,k.next=3,this.constructor.postJSON({url:this.baseurl+'/users',data:{nickname:g,username:h,password:i}});case 3:return k.t1=k.sent,k.next=6,k.t0.parseUser.call(k.t0,k.t1);case 6:return k.abrupt('return',k.sent);case 7:case'end':return k.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getAllMessages=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=this.constructor,g.next=3,this.constructor.fetchJSON({url:this.baseurl+'/messages'});case 3:return g.t1=g.sent,g.next=6,g.t0.parseMessage.call(g.t0,g.t1);case 6:return g.abrupt('return',g.sent);case 7:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getMessageById=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=this.constructor,h.next=3,this.constructor.fetchJSON({url:this.baseurl+'/message/'+f});case 3:return h.t1=h.sent,h.next=6,h.t0.parseMessage.call(h.t0,h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getMessagesByLimit=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.t0=this.constructor,h.next=3,this.constructor.fetchJSON({url:this.baseurl+'/messages/'+f});case 3:return h.t1=h.sent,h.next=6,h.t0.parseMessage.call(h.t0,h.t1);case 6:return h.abrupt('return',h.sent);case 7:case'end':return h.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.getLastMessage=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getMessagesByLimit(1);case 2:return g.abrupt('return',g.sent[0]);case 3:case'end':return g.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a.prototype.sendMessage=function(){var c=_asyncToGenerator(regeneratorRuntime.mark(function d(f){var g=f.token,h=f.text;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.t0=this.constructor,j.next=3,this.constructor.postJSON({url:this.baseurl+'/messages',data:{token:g,text:h}});case 3:return j.t1=j.sent,j.next=6,j.t0.parseMessage.call(j.t0,j.t1);case 6:return j.abrupt('return',j.sent);case 7:case'end':return j.stop();}},d,this)}));return function b(){return c.apply(this,arguments)}}(),a}();try{module.exports=Gluipertje}catch(a){console.log(a)}
